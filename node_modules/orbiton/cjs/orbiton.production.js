"use strict";function t(t,e=null){return null==e?(e=Math.floor(1e8*Math.random()),Symbol(`${t}_random_generated_key_${e}`)):Symbol(`${t}_provided_key_${e}`)}function e(t,e){const n=e;return n.state=t.state,n}function n(t,s){if(void 0===s)return s;if(t.type!==s.type)return s;if("element"===t.type&&"element"===s.type)return r(t,s);if("Component"===t.type&&"Component"===s.type){const r=e(t,s);return r.currentTree=n(t.currentTree,r.render()),r}if("Fragment"===t.type&&"Fragment"===s.type){const e=o(t.children,s.children);return s.children=e,s}}function r(t,e){const n=e;return t.attachedComponent!==e.attachedComponent||t.tag!==e.tag?e:(n.children=o(t.children,e.children),n)}function o(t,n){const o=[];t.forEach(((t,s)=>{const i=n[s];var a,c;o.push((a=t,void 0===(c=i)||void 0===a||"string"==typeof a||"string"==typeof c||a.type!==c.type?c:"element"===a.type&&"element"===c.type?r(a,c):"Component"===a.type&&"Component"===c.type?e(a,c):c))}));for(const e of n.slice(t.length))o.push(e);return o}class s{constructor(t={},e={}){this.state={},this.props=t,this.context=e}changeState(t,e=null){if("Object"!==t.constructor.name)throw Error("updateState(...) method takes in an object");const n=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(this.state);for(const e of n){if(!r.includes(e))throw Error("The value `"+e+"` is not in the state object");this.state[e]=t[e]}null!==e&&e.call(this,t)}}function i(t,e){const{attributes:n={},events:r={},children:o=[]}=e;return{tag:t,attributes:n,events:r,children:o,type:"element"}}function a(t,e={},n={}){if("function"==typeof t){if(t.isClassComponent){return new t(e,n)}if(t.isFragment){return new t(e.children)}return t(e)}if("string"==typeof t){return i(t,e)}return t}function c(t,e){if(Array.isArray(e))for(const n of e)c(t,n);else t.appendChild(e)}function l(t){if(Array.isArray(t))for(const e of t)l(e);else t.remove()}function h(t,e){if(Array.isArray(t)){let n=t.length;for(;n>1;){t.pop().remove(),n--}const r=t.pop();Array.isArray(e)?r.replaceWith(...p(e)):r.replaceWith(e)}else Array.isArray(e)?t.replaceWith(...p(e)):t.replaceWith(e)}function p(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];if(Array.isArray(r)){const t=p(r);for(const n of t)e.push(n)}else e.push(r)}return e}function u(t){return Array.isArray(t)?t:t.childNodes}const _=/[A-Z]/;function f(t,e,n){const r=t.slice(0,e);let o=t.slice(e);return o=o.toLowerCase(),`${r}${n}${o}`}function d(t){let e=t;const n=e.match(_)||[];if(n.length)for(let r=0;r<n.length;r++){const o=n[r];0!==t.indexOf(o)&&(e=f(e,t.indexOf(o),"-"))}return e}function m(t,e,n){const r=t.slice(0,e);let o=t.slice(e);return o=o.toLowerCase(),`${r}${n}${o}`}function y(t){return"number"==typeof t?`${t}px`:t}function O(t){return"object"==typeof t?function(t){let e="";if(Array.isArray(t))throw new Error("Style prop only accepts as string os an object arrays ar not accepted");for(const[n,r]of Object.entries(t)){const t=n.match(_);if(null!==t){if(1===t.length){const o=t[0],s=n.indexOf(o);e=`${e}${m(n,s,"-")}: ${y(r)};`}}else e=`${e}${n}: ${y(r)};`}return e}(t):t}function g(t,e={ns:"http://www.w3.org/1999/xhtml"},n="http://www.w3.org/1999/xhtml"){if(Array.isArray(t)){const r=[];for(const o of t)r.push(g(o,e,n));return r}return"string"==typeof t||"boolean"==typeof t||"number"==typeof t?function(t,e){const n=document.createTextNode(t);n.__ORBITON_CONFIG__={},e.parentNotElement&&(n.__ORBITON_CONFIG__.__nonElement_parents_hosted=e.parents);return n}(`${t}`,e):"element"===t.type?function(t,e={ns:"http://www.w3.org/1999/xhtml"},n="http://www.w3.org/1999/xhtml"){let r,o;"svg"===t.tag?(r=document.createElementNS("http://www.w3.org/2000/svg","svg"),o="http://www.w3.org/2000/svg"):"http://www.w3.org/1999/xhtml"!==n?(r=document.createElementNS(n,t.tag),o=n):(r=document.createElement(t.tag),o="http://www.w3.org/1999/xhtml");r.__ORBITON_CONFIG__={},e.parentNotElement&&(r.__ORBITON_CONFIG__.__nonElement_parents_hosted=e.parents);t.attachedComponent&&(r.__ORBITON_CONFIG__.attachedComponent=t.attachedComponent);if(function(t,e={}){for(const[n,r]of Object.entries(e))"style"===n?t.setAttribute(n,O(r)):"classname"===n.toLowerCase()?t.setAttribute("class",r):t.setAttribute(d(n),r)}(r,t.attributes),function(t,e){t.__ORBITON_CONFIG__.extendEvents=e;for(const[n,r]of Object.entries(e))t.addEventListener(n,r)}(r,t.events),t.children&&t.children.length>0){const n={ns:"svg"===t.tag?"http://www.w3.org/2000/svg":e.ns};for(const e of t.children)if(Array.isArray(e))for(const t of e){N(r,g(t,n,o))}else{N(r,g(e,n,o))}}return t.domRef=r,r.__ORBITON_CONFIG__.__element=t,r}(t,e,n):"Component"===t.type?function(t,e){const n=t.makeChild();e.parentNotElement=!0,e.parents&&Array.isArray(e.parents)||(e.parents=[]);const r=[...e.parents];r.push(t);const o={...e,parents:r},s=g(n,o);return Array.isArray(s)?[...s]:[s]}(t,e):"Fragment"===t.type?function(t,e){const n=[];e.parentNotElement=!0,!1===Array.isArray(e.parents)&&(e.parents=[]);if(0===t.children.length)throw new Error("A fragment Always return have a child element.");for(const r of t.children){const o=[...e.parents];o.push(t);const s=g(r,{...e,parents:o});Array.isArray(s)?n.push(...s):n.push(s)}return n}(t,e):void 0}function N(t,e){if(Array.isArray(e))for(const n of e)N(t,n);else t.appendChild(e)}function C(t,e){t.__ORBITON_CONFIG__.extendEvents=e;for(const[n,r]of Object.entries(e))t.addEventListener(n,r)}function I(t,e,n){return function(t){for(const[e,n]of Object.entries(t.__ORBITON_CONFIG__.extendEvents))t.removeEventListener(e,n)}(n),C(n,e),n}function A(t,e=null){if("__ORBITON_CONFIG__"in t&&Array.isArray(t.__ORBITON_CONFIG__.__nonElement_parents_hosted))if(t.__ORBITON_CONFIG__.attachedComponent&&t.__ORBITON_CONFIG__.attachedComponent.Mounted(),null!==e){const n=t.__ORBITON_CONFIG__.__nonElement_parents_hosted.indexOf(e);t.__ORBITON_CONFIG__.__nonElement_parents_hosted.forEach(((t,e)=>{"Component"===t.type&&e>=n&&t.Mounted()}))}else t.__ORBITON_CONFIG__.__nonElement_parents_hosted.forEach(((t,e)=>{"Component"===t.type&&t.Mounted()}));Array.isArray(t)?u(t).forEach(((t,n)=>{A(t,e)})):t.childNodes.forEach(((t,e)=>{A(t)}))}function w(t,e){let n;n=Array.isArray(t)?t[0]:t;const r=[];for(const t of n.__ORBITON_CONFIG__.__nonElement_parents_hosted){if(t===e)break;r.push(t)}return r}function b(t){return"string"==typeof t||t instanceof String||"number"==typeof t||t instanceof Number||"boolean"==typeof t||t instanceof Boolean}function E(t,e,n,r=null){if(void 0===e||void 0===t){if(void 0===e&&void 0===t)return;if(void 0===e)return l(n),n;{const t=g(e);return c(r,t),t}}if(b(t)||b(e)){let t;try{t=function(t){if(Array.isArray(t))throw new Error("Cannot extract node value from array");return t.nodeValue}(n)}catch(e){t=void 0}if(t!==`${e}`){const t=g(e);return h(n,t),A(t),t}return n}if(t.type!==e.type){let r;if("element"!==t.type){r=g(e,{parentNotElement:!0,parents:w(n,t)})}else r=g(e);return h(n,r),A(r),r}return"element"===t.type&&"element"===e.type?function(t,e){const n=t.domRef;if(t.tag!==e.tag){const t=[];let r=!1;if(Array.isArray(n.__ORBITON_CONFIG__.__nonElement_parents_hosted)){r=!0;for(const e of n.__ORBITON_CONFIG__.__nonElement_parents_hosted){if(e===parent)break;t.push(e)}}const o=g(e,{parentNotElement:r,parents:r?t:void 0});return h(n,o),A(o),o}e.domRef=t.domRef,I(t.events,e.events,n),function(t,e,n){for(const[r,o]of Object.entries(e))"style"===r?t[r]!==o&&n.setAttribute(r,O(o)):"classname"===r.toLowerCase()?t[r]!==o&&n.setAttribute("class",o):t[r]!==o&&n.setAttribute(d(r),o);for(const r in t)r in e||("className"===r.toLowerCase()?n.removeAttribute("class"):n.removeAttribute(d(r)))}(t.attributes,e.attributes,n),F(t.children,e.children,n)}(t,e):"Fragment"===t.type&&"Fragment"===e.type?(F(t.children,e.children,n),n):"Component"===t.type&&"Component"===e.type?function(t,e,n){if(t.pearlId!==e.pearlId){const r=g(e,{parentNotElement:!0,parents:w(n,t)});return h(n,r),A(r,e),r}E(t.makeChild(),e.makeChild(),n)}(t,e,n):void 0}function v(t){const e=function(){const t=document.querySelectorAll("*"),e=[];return t.forEach(((t,n)=>{const r=t.childNodes;e.push(t);for(const t of r)t instanceof Text&&e.push(t)})),e}(),n=[];return e.forEach(((e,r)=>{if(e.__ORBITON_CONFIG__&&Array.isArray(e.__ORBITON_CONFIG__.__nonElement_parents_hosted))for(const r of e.__ORBITON_CONFIG__.__nonElement_parents_hosted)if(r===t){n.push(e);break}})),n}function F(t,e,n){let r=0;const o=u(n);let s;o.length>0&&(s=o[0].parentNode);for(let n=0;n<t.length;n++){const i=t[n],a=e[n];if(Array.isArray(i)||Array.isArray(a)){if(Array.isArray(a))if(Array.isArray(i)){i.forEach(((t,e)=>{const n=T(t,a[e],r,o);r+=n}));const t=[];for(const e of a.slice(i.length)){const n=g(e);Array.isArray(n)?t.push(...p(n)):t.push(n)}let e=o[r];if(void 0!==e){const n=o[0].parentNode;for(const s of t)n.insertBefore(s,e),r++,e=o[r]}else{o[0].parentNode.append(...t)}}else{const t=o[r],e=[];a.forEach(((t,n)=>{e.push(g(t)),0!==n&&r++})),h(t,e)}}else{const t=T(i,a,r,o,s);r+=t}}const i=[];for(const n of e.slice(t.length)){const t=g(n);i.push(t)}i.length>0&&c(s,i)}function T(t,e,n,r,o=null){let s=0;if(void 0===t)E(t,e,r,o);else if("Fragment"===t.type){const n=v(t);s+=n.length,E(t,e,n)}else if("Component"===t.type){const n=v(t);s+=n.length,E(t,e,n)}else E(t,e,r[n]),s++;return s}function R(t,e,r){const o=n(t,e),s=v(r);let i;return i=1===s.length?s[0]:s,E(t,e,i),o}function B(t,e,n={}){if(t.tag!==e.tagName.toLocaleLowerCase())throw new Error(`Its seems provided tree does node match with the DOM element.\nExpected <${t.tag} ....>...</${t.tag}> but insted got <${e.tagName.toLocaleLowerCase()}>...</${e.tagName.toLocaleLowerCase()}>\n    `);if(e.__ORBITON_CONFIG__={},n.parentNotElement&&(e.__ORBITON_CONFIG__.__nonElement_parents_hosted=n.parents),t.attachedComponent&&(e.__ORBITON_CONFIG__.attachedComponent=t.attachedComponent),C(e,t.events),t.children&&t.children.length>0){let n=-1;for(const r of t.children)if(Array.isArray(r))for(const t of r)n=G(t,e,{},n);else n=G(r,e,{},n)}t.domRef=e,e.__ORBITON_CONFIG__.__element=t}function G(t,e,n,r=0){let o=r;return"Fragment"===t.type?o=$(t,e,n,o):"element"===t.type?(o++,B(t,e.childNodes[o],n)):"Component"===t.type&&(o=k(t,e,n,o)),o}function $(t,e,n={},r=-1){let o=r,s=[];n.parentNotElement=!0;let i={};Array.isArray(n.parents)?(s=[...n.parents],s.push(t)):s.push(t);for(const r of t.children)i={...n,parents:s},"element"===r.type?(o++,B(r,e.childNodes[o],i)):"Fragment"===r.type?o=$(r,e,i,o):"Component"===r.type&&(o=k(r,e,i,o));return o}function k(t,e,n={},r=-1){let o=r,s=[];n.parentNotElement=!0;let i={};Array.isArray(n.parents)?(s=[...n.parents],s.push(t)):s.push(t);let a=t.makeChild();return i={...n,parents:s},"element"===a.type?(o++,B(a,e.childNodes[o],i)):"Fragment"===a.type?o=$(a,e,i,o):"Component"===t.type&&(o=k(a,e,i,o)),o}const x={withComponent:(t,e,n)=>{const{attributes:r={},events:o={},children:s=[],props:i={}}=n;return{tag:t,attributes:r,events:o,children:s,type:"element",attachedComponent:a(e,i),props:i}},render:g,createElement:i,append:function(t,e,n){!function(t,e){const n=g(e);t.__orbiton__hosted__tree=e,t.__ORBITON_CONFIG____isOrbitonRoot=!0,c(t,n),A(t)}(e,t),n&&n()},Component:class extends s{static isClassComponent=!0;constructor(e={},n={}){super(e,n),e!=={}&&(this.key=e&&e.key?e.key:null),this.type="Component",this.pearlId=t(this.constructor.name,this.key),this.makeChild=this.makeChild.bind(this),this.Mounted=this.Mounted.bind(this),this.WillMount=this.WillMount.bind(this),this.getPearlId=this.getPearlId.bind(this),this.updateState=this.updateState.bind(this),this.changeState=this.changeState.bind(this)}getPearlId(){return this.pearlId}Mounted(){}WillMount(){}updateState(t,e=null){this.changeState(t,e);const n=R(this.currentTree,this.render(),this);this.currentTree=n}makeChild(){return this.currentTree=this.render(),this.currentTree}render(){return{tag:"div"}}},createComponent:a,Fragment:class{static isFragment=!0;constructor(e){const n=Math.floor(1e8*Math.random());this.FragmentID=t("Fragment_Type",`by_fragment_${n}`),this.children=e,this.type="Fragment",this.getPearlId=this.getPearlId.bind(this)}getPearlId(){return this.FragmentID}},BaseComponent:s,LogicalComponent:class extends s{static isClassComponent=!0;constructor(e={},n={}){super(e,n),e!=={}&&(this.key=e&&e.key?e.key:null),this.type="Component",this.pearlId=t(this.constructor.name,this.key),this.Mounted=this.Mounted.bind(this),this.WillMount=this.WillMount.bind(this),this.getPearlId=this.getPearlId.bind(this),this.updateState=this.updateState.bind(this),this.changeState=this.changeState.bind(this)}getPearlId(){return this.pearlId}Mounted(){}WillMount(){}updateState(t,e=null){this.changeState(t,e)}},version:"1.2.43",hydrate:function(t,e){const n=e.childNodes;"element"===t.type&&B(t,n[0]),A(e)},Config:class{static renderer=null;static registerRender(t){if(null!==t)throw new Error("The renderer instance can only be initiated Once in an Enviromemt");if("updateUI"in t==!1)throw new Error("Provided Renderer lacks `updateUI` function");this.renderer=t}}};
/**
* A Javascript library for building Browser User Interfaces
* @author Beigana Jim Junior <jimjunior854@outlook.com>
* @copyright Beigana Jim Junior and Contributors © 2021 - present
* @license MIT
*
* Learn more at the official Documentation: {@link https://orbiton.js.org}
*/module.exports=x;
